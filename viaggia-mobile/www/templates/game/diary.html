<ion-view>
    <ion-nav-title>
        {{'diary_title' | translate}}
    </ion-nav-title>
    <ion-content class="game-ranking" has-bouncing="false" scroll="false">
        <div class="filter item-accordion" ng-if="!!filter.options">
            <ion-item class="item-accordion-header item-icon-right" ng-click="filter.toggle()">
                <div ng-if="!filter.open">{{!!filter.selected ? ('game_tab_diary_filter_' + filter.selected) : '' | translate}}</div>
                <i class="icon ion-arrow-down-b" ng-class="{'open': filter.open}"></i>
            </ion-item>
            <div class="item-accordion-content" ng-show="filter.open">
                <ion-list>
                    <ion-item ng-repeat="option in filter.options" ng-click="filter.filterBy(option)" style="padding: 2px; min-height: 30px;">
                        <div ng-class="{ 'becomeblue' : filter.selected==option}">{{'game_tab_diary_filter_' + option | translate}}</div>
                    </ion-item>
                </ion-list>
            </div>
        </div>
        <ion-scroll class="ranking" ng-style="rankingStyle" delegate-handle="diaryScroll" ng-if="!noDiary()">
            <!--<div class="list" style="margin-top: 25px">-->
            <ion-list>
                <div style="margin-top: 25px">
                    <div ng-repeat="day in days">
                        <div class="message-item">
                            <div class="timeline-line">
                            </div>
                            <div class="timeline-dot">
                                <H5 class="timeline-day"> {{day.name| date:'dd/MM'}} </H5>
                            </div>
                            <div ng-repeat="message in day.messages" ng-click="{{getState(message)}}" class="message-inner" style=" border: 2px solid {{getStyleColor(message)}}">
                                <div class="row" style="padding: 0px">
                                    <div class="col-center timeline-arrow" style="border-right-color: {{getStyleColor(message)}}">
                                    </div>
                                    <i class="col-center timeline-col icon {{getIcon(message)}}" style="background-color: {{getStyleColor(message)}}"></i>
                                    <div class="col timeline-msg">
                                        {{getString(message) | translate: getParams(message)}}
                                    </div>
                                    <div class="col col-10 col-info">
                                        <a class="challenge-info"><i class="icon ion-ios-arrow-right"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <ion-infinite-scroll ng-if="maybeMore" on-infinite="loadMore()"></ion-infinite-scroll>
            </ion-list>
        </ion-scroll>
        <div ng-if="noDiary()">
            <h4>{{'no_diary' | translate}}</h4>
        </div>
    </ion-content>
</ion-view>