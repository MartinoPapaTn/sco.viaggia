<ion-view title="{{'home_gamification' | translate}} {{currentUser.nickName}}">
    <ion-nav-buttons side="right">
        <button class=" button-icon button-home icon ion-person" ng-click="openProfile();"></button>
    </ion-nav-buttons>

    <ion-content class="game-challenges" has-bouncing="false" scroll="false" ng-class="{'margin-for-trackingbar-tab':buttonMapNeed()}">
        <!-- Filter -->
        <div class="filter">
            <div class="challenge-tabs row">
                <div class="col challenge-tab" ng-click="openTab('future')" ng-class="{'becomeblue':activeTab('future')}">{{'challenge_future' | translate}}</h4>
                </div>
                <div class="col challenge-tab" ng-click="openTab('past')" ng-class="{'becomeblue':activeTab('past')}">{{'challenge_past' | translate}}</h4>
                </div>
            </div>
        </div>

        <!-- Unlock -->
        <div ng-if="actualTab=='unlock'">
            <ion-scroll class="padding-right padding-left challenges" ng-style="challengesStyle" delegate-handle="challengesScroll">
                <ion-list>
                    <ion-item class="challenge item-text-wrap type-challenge">
                        <h4 class="label">{{'warning_unlock_challenge' | translate}}</h4>
                        <button class="button button-clear button-challenge-enable"> ho capito</button>
                    </ion-item>
                    <ion-item class="challenge" ng-click="unlock(challenge)" ng-repeat="type in typeOfChallenges" ng-if="type.state==0">
                        <div>{{type.short_it}}</div>
                        <div class="row">
                            <div class="col challenge-long-desc">{{type.long_it}}</div>
                            <div class="col challenge-read-more" ng-click="readMore(type)">{{'read_more' | translate}}</div>
                        </div>
                        <button class="button button-clear button-challenge-enable">
                            <i class="icon ion-locked"></i>
                        </button>
                    </ion-item>
                </ion-list>
            </ion-scroll>
        </div>
        <!-- future -->

        <div ng-if="actualTab=='future'">
            <div ng-if="challenges != null && challenges.length == 0" class="text-center padding">
                <h4>{{filter.selected == 'old' ? 'no_challenges_old' : 'no_challenges' | translate}}</h4>
            </div>
            <div class="padding-right padding-left game-points" ng-if="!challenges">
                <h4 class="label">{{'no_status' | translate}}</h4>
            </div>
        </div>

        <!-- past -->
        <div ng-if="actualTab=='past'">
            <div ng-if="challenges != null && challenges.length == 0" class="text-center padding">
                <h4>{{filter.selected == 'old' ? 'no_challenges_old' : 'no_challenges' | translate}}</h4>
            </div>
            <div class="padding-right padding-left game-points" ng-if="!challenges">
                <h4 class="label">{{'no_status' | translate}}</h4>
            </div>
            <ion-scroll class="padding-right padding-left challenges" ng-style="challengesStyle" delegate-handle="challengesScroll" ng-if="challenges != null && challenges.length > 0">
                <ion-list>
                    <ion-item class="challenge" ng-click="showChallengeInfo(challenge)" ng-repeat="challenge in challenges" ng-class="{'challenge-old': !challenge.active || challenge.success, success: !!challenge.success, fail: !challenge.success}">
                        <div class="challenge-desc">{{challenge.challDesc}}</div>
                        <div class="challenge-countdown" ng-if="!!challenge.active" ng-init="days = {days: challenge.daysToEnd}">
                            {{'game_tab_challenges_daysToEnd' + (challenge.daysToEnd == 1 ? '_1' : '') | translate:days}}
                        </div>
                        <div class="challenge-result" ng-if="!challenge.active || challenge.success">
                            {{'game_tab_challenge_success_' + challenge.success | translate}}
                        </div>
                        <div class="challenge-status">
                            <span class="challenge-count">
                                {{'game_tab_challenges_status' + (!challenge.active || challenge.success ? '_final' : '') | translate}}: {{!!challenge.success
                                ? challenge.challTarget : challenge.row_status}}/{{challenge.challTarget}}
                            </span>
                        </div>
                        <a class="challenge-info">
                            <i class="icon ion-information-circled"></i>
                        </a>

                    </ion-item>
                </ion-list>
            </ion-scroll>
        </div>

    </ion-content>
</ion-view>